// Generated by CoffeeScript 1.9.2
(function() {
  'use strict';
  var PLUGIN_NAME, gutil, through;

  PLUGIN_NAME = 'gulp-modify';

  through = require('through2');

  gutil = require('gulp-util');

  module.exports = function(options) {
    if (options == null) {
      options = {};
    }
    return through.obj(function(file, enc, next) {
      var _error, content, error, fileModifier;
      error = null;
      if (file.isBuffer()) {
        if (fileModifier = options.fileModifier) {
          try {
            content = fileModifier(file, file.contents.toString('utf8'));
            file.contents = new Buffer(content);
          } catch (_error) {
            _error = _error;
            error = new gutil.PluginError('Error', _error, {
              showStack: true
            });
          }
        }
      }
      return next(error, file);
    });
  };

}).call(this);
